<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–∞–ø–∏—Å—å –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—É</title>
    <style>
        /* --- CSS –°–¢–ò–õ–ò --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        h1, h3 { margin-top: 0; }

        /* --- –ù–û–í–û–ï: –°—Ç–∏–ª–∏ –¥–ª—è –õ–æ–≥–æ—Ç–∏–ø–∞ --- */
        .logo-container {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .logo {
            width: 100px;         /* –®–∏—Ä–∏–Ω–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ */
            height: 100px;        /* –í—ã—Å–æ—Ç–∞ */
            object-fit: cover;    /* –ß—Ç–æ–±—ã –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ —Å–ø–ª—é—â–∏–ª–∞—Å—å */
            border-radius: 50%;   /* –î–µ–ª–∞–µ–º –∫—Ä—É–≥–ª—ã–º (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π - —É–±–µ—Ä–∏ —ç—Ç—É —Å—Ç—Ä–æ–∫—É) */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); /* –ö—Ä–∞—Å–∏–≤–∞—è —Ç–µ–Ω—å */
            background-color: #fff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω, –µ—Å–ª–∏ –ª–æ–≥–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ */
        }

        /* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ */
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        .header h1 { font-size: 22px; margin-bottom: 5px; }
        .header p { color: var(--tg-theme-hint-color, #888); margin: 0; font-size: 14px;}

        /* –°–µ—Ç–∫–∞ —É—Å–ª—É–≥ */
        .services-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .service-card {
            background-color: var(--tg-theme-secondary-bg-color, #f5f5f5);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .service-card .icon { font-size: 32px; margin-bottom: 10px; display: block; }
        .service-card .title { font-weight: bold; font-size: 14px; display: block; margin-bottom: 5px; }
        .service-card .price { font-size: 12px; opacity: 0.8; }

        .service-card.selected {
            border-color: var(--tg-theme-button-color, #2481cc);
            background-color: rgba(36, 129, 204, 0.1);
        }

        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 500; font-size: 14px; }
        
        input, textarea {
            width: 100%;
            padding: 12px;
            box-sizing: border-box;
            border: 1px solid var(--tg-theme-hint-color, #ccc);
            border-radius: 8px;
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            font-size: 16px;
            outline: none;
        }
        input:focus { border-color: var(--tg-theme-button-color, #2481cc); }
    </style>
</head>
<body>

    <!-- 1. –õ–û–ì–û–¢–ò–ü (–ù–æ–≤–æ–µ!) -->
    <div class="logo-container">
        <!-- –í–ê–ñ–ù–û: –ï—Å–ª–∏ —Ç–≤–æ–π —Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ logo.png, –ø–æ–º–µ–Ω—è–π –∏–º—è –∑–¥–µ—Å—å -->
        <img src="https://cdn-icons-png.flaticon.com/512/3004/3004458.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ö–ª–∏–Ω–∏–∫–∏" class="logo">
    </div>

    <!-- 2. –®–ê–ü–ö–ê -->
    <div class="header">
        <h1 id="greeting">–ü—Ä–∏–≤–µ—Ç! üëã</h1>
        <p>–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–∏–µ–º –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—É</p>
    </div>

    <!-- 3. –£–°–õ–£–ì–ò -->
    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É:</h3>
    <div class="services-grid">
        <div class="service-card" onclick="selectService('consultation', 0)">
            <span class="icon">ü©∫</span>
            <span class="title">–û—Å–º–æ—Ç—Ä</span>
            <span class="price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
        </div>
        <div class="service-card" onclick="selectService('caries', 3000)">
            <span class="icon">ü¶∑</span>
            <span class="title">–õ–µ—á–µ–Ω–∏–µ</span>
            <span class="price">–æ—Ç 3000‚ÇΩ</span>
        </div>
        <div class="service-card" onclick="selectService('cleaning', 5000)">
            <span class="icon">‚ú®</span>
            <span class="title">–ß–∏—Å—Ç–∫–∞</span>
            <span class="price">5000‚ÇΩ</span>
        </div>
        <div class="service-card" onclick="selectService('whitening', 10000)">
            <span class="icon">üíé</span>
            <span class="title">–û—Ç–±–µ–ª–∏–≤–∞–Ω–∏–µ</span>
            <span class="price">10000‚ÇΩ</span>
        </div>
    </div>

    <!-- 4. –î–ê–¢–ê –ò –í–†–ï–ú–Ø -->
    <div class="form-group">
        <label>–î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞:</label>
        <input type="date" id="date-input">
    </div>
    <div class="form-group">
        <label>–í—Ä–µ–º—è:</label>
        <input type="time" id="time-input" min="09:00" max="20:00" step="1800">
    </div>

    <!-- 5. –ö–û–ù–¢–ê–ö–¢–´ -->
    <div class="form-group">
        <label>–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω:</label>
        <input type="tel" id="phone-input" placeholder="+7 (999) 000-00-00">
    </div>
    
    <div class="form-group">
        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea id="comment-input" rows="2" placeholder="–ë–æ–ª–∏—Ç –∑—É–± —Å–ø—Ä–∞–≤–∞..."></textarea>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let selectedService = null;
        let selectedPrice = 0;

        let user_name = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.first_name : "–ì–æ—Å—Ç—å";
        document.getElementById("greeting").innerText = `–ü—Ä–∏–≤–µ—Ç, ${user_name}! üëã`;

        tg.MainButton.textColor = "#FFFFFF";
        tg.MainButton.color = "#2cab37";

        function selectService(serviceName, price) {
            selectedService = serviceName;
            selectedPrice = price;
            
            document.querySelectorAll('.service-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            checkForm();
        }

        document.getElementById('date-input').addEventListener('change', checkForm);
        document.getElementById('time-input').addEventListener('change', checkForm);
        document.getElementById('phone-input').addEventListener('input', checkForm);

        function checkForm() {
            let date = document.getElementById('date-input').value;
            let time = document.getElementById('time-input').value;
            let phone = document.getElementById('phone-input').value;

            if (selectedService && date && time && phone.length > 5) {
                tg.MainButton.text = `–ó–∞–ø–∏—Å–∞—Ç—å—Å—è (${selectedPrice > 0 ? selectedPrice + '‚ÇΩ' : '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'})`;
                tg.MainButton.show();
            } else {
                tg.MainButton.hide();
            }
        }

        Telegram.WebApp.onEvent('mainButtonClicked', function(){
            let data = {
                type: 'booking',
                service: selectedService,
                price: selectedPrice,
                date: document.getElementById('date-input').value,
                time: document.getElementById('time-input').value,
                phone: document.getElementById('phone-input').value,
                comment: document.getElementById('comment-input').value,
                user_name: user_name
            };
            tg.sendData(JSON.stringify(data));
        });
    </script>
</body>
</html>